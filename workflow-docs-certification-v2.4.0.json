{
  "name": "PhotoCertif - Docs Certification v2.4.0 (Ultra-Simplified)",
  "nodes": [
    {
      "parameters": {
        "assignments": {
          "assignments": [
            {
              "id": "storage_id",
              "name": "storage_id",
              "value": "",
              "type": "string"
            },
            {
              "id": "doc_name",
              "name": "document_name",
              "value": "",
              "type": "string"
            },
            {
              "id": "cert_symbol",
              "name": "cert_symbol",
              "value": "DOC",
              "type": "string"
            },
            {
              "id": "cert_description",
              "name": "cert_description",
              "value": "",
              "type": "string"
            },
            {
              "id": "cert_owner",
              "name": "cert_owner",
              "value": "",
              "type": "string"
            },
            {
              "id": "collection_mint",
              "name": "collection_mint_address",
              "value": "",
              "type": "string"
            },
            {
              "id": "affiliate_code",
              "name": "affiliate_code",
              "value": "",
              "type": "string"
            }
          ]
        },
        "options": {}
      },
      "id": "manual-trigger-1",
      "name": "üìù Input Data",
      "type": "n8n-nodes-base.manualTrigger",
      "typeVersion": 1,
      "position": [250, 300],
      "notes": "Provide all certification inputs here:\n- storage_id (from upload)\n- document_name\n- cert_symbol (max 10 chars)\n- cert_description\n- cert_owner (required)\n- collection_mint_address (optional)\n- affiliate_code (optional)"
    },
    {
      "parameters": {
        "url": "={{$env.PHOTOCERTIF_API_BASE_URL}}/api/storage/docs/b2b-certify-full",
        "authentication": "genericCredentialType",
        "genericAuthType": "httpHeaderAuth",
        "sendHeaders": true,
        "headerParameters": {
          "parameters": [
            {
              "name": "Content-Type",
              "value": "application/json"
            }
          ]
        },
        "sendBody": true,
        "specifyBody": "json",
        "jsonBody": "={\n  \"storage_id\": \"{{$json.storage_id}}\",\n  \"user_private_key\": \"{{$credentials.SolanaWallet.privateKey}}\",\n  \"cert_data\": {\n    \"name\": \"{{$json.document_name}}\",\n    \"cert_symbol\": \"{{$json.cert_symbol}}\",\n    \"cert_description\": \"{{$json.cert_description}}\",\n    \"cert_prop\": \"{{$json.cert_owner}}\"\n  },\n  \"collection_mint_address\": \"{{$json.collection_mint_address}}\",\n  \"affiliate_code\": \"{{$json.affiliate_code}}\"\n}",
        "options": {
          "timeout": 120000
        }
      },
      "id": "certify-full-2",
      "name": "üöÄ Certify My Document",
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.1,
      "position": [550, 300],
      "credentials": {
        "httpHeaderAuth": {
          "id": "photocertif-api-key",
          "name": "PhotoCertif API Key"
        }
      },
      "notes": "This endpoint does EVERYTHING:\n1. Get pricing\n2. Check balances\n3. Swap SOL‚ÜíCHECKHC (if needed)\n4. Transfer CHECKHC (main + affiliate)\n5. Upload Irys (3 files, 3 signatures)\n6. Create NFT (1 signature)\n7. Finalize\n\nPrivate key transmitted ONCE in HTTPS.\n\nTimeout: 2 minutes (can take 30-60s)"
    }
  ],
  "connections": {
    "üìù Input Data": {
      "main": [
        [
          {
            "node": "üöÄ Certify My Document",
            "type": "main",
            "index": 0
          }
        ]
      ]
    }
  },
  "pinData": {},
  "settings": {
    "executionOrder": "v1"
  },
  "staticData": null,
  "tags": [
    {
      "createdAt": "2025-01-12T17:35:00.000Z",
      "updatedAt": "2025-01-12T17:35:00.000Z",
      "id": "photocertif-docs",
      "name": "photocertif-docs"
    },
    {
      "createdAt": "2025-01-12T17:35:00.000Z",
      "updatedAt": "2025-01-12T17:35:00.000Z",
      "id": "simplified",
      "name": "simplified"
    }
  ],
  "triggerCount": 1,
  "updatedAt": "2025-01-12T17:35:00.000Z",
  "versionId": "v2.4.0"
}
